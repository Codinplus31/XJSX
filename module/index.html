<!DOCTYPE html>
<html>

<head>
  <script src="xjsx.0.1.0.js"></script>
  
  <!-- Modules -->
  <script src="fetch.js"></script>
  <script src="include.js"></script>
  <script src="print.js"></script>
  <script src="print-html.js"></script>
  <script src="if.js"></script>
  <script src="data.js"></script>
  <script src="on.js"></script>
  <script src="eval.js"></script>
  <script src="console-log.js"></script>
  <script src="animate.js"></script>
  <script src="for-each.js"></script>
  <script src="parse-json.js"></script>
  <script src="use-template.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
</head>

<body>
  
<h1>List of all keys at window</h1>

<?on: "xload"; event?>
  <?eval: var _dt=event.detail, _val=event.detail.val,_key=event.detail.key?>
  <?if: _dt.parent?>
     <a href="#" onclick="back(this.textContent)">
       ...<?print: _dt.parent?>
     </a>
     <br>
  <?end?>
  <?if: "object"=== typeof _val && _val?>
    <?for-each: _val; val, key?>
       <a onclick="foo(this.textContent)" href="#">
        <?print: _key+"/"+key?>
       </a>
       <br>
    <?end?>
  <?else?> 
    <mark><?print: _val?></mark>
  <?end?>
<?end?>

<script>
function parse(e){
  e=e
  .trim()
  . replace (/(\/)/g,".");
  
  return e
}

function prt(e){
  e=e.trim()
  .split("/");
  e.pop();
  e=e.join("/")
  return e
}

function back(_e){
  _e=_e.replace("...","")
  var e=parse(_e)
  
    var val=eval(e)
    XJSX.event.emit("xload", { val: val, key: _e, parent: prt(_e) }) 
  }
  
  function foo(_e){
   var e=parse(_e);
    var val=eval(e)
    XJSX.event.emit("xload", { val: val, key: _e, parent: prt(_e) }) 
  }
  
  XJSX.event.emit("xload",{val: window,key:"window"})
</script>
</body>

</html>